(function(){function n(){chrome.management.getAll(function(a){for(var b=[],d=[],e=0;e<a.length;e++){var c=a[e];if(c.id!==chrome.app.getDetails().id&&"theme"!==c.type){var f="";c.icons&&(f=c.icons[c.icons.length-1].url);f='<li data-id="'+c.id+'" title="'+c.name+'" data-optionurl="'+c.optionsUrl+'"><img src="'+f+'" alt="'+c.name+'"></li>';!1===c.enabled?d.push(f):b.push(f)}}localStorage.getItem("_switch_rank_sort_")||(b.sort(function(a,b){return g.get($(b).data("id"))-g.get($(a).data("id"))}),d.sort(function(a,
b){return g.get($(b).data("id"))-g.get($(a).data("id"))}));h.html(b.join(""));k.html(d.join(""))})}function p(){var a=localStorage.getItem("_lockList_");return a?JSON.parse(a):null}var h=$("#showList"),k=$("#hideList"),l=$("#wrap");l.width({3:228,4:304,5:380,6:456,7:532,8:608,9:684}[localStorage.getItem("_showColumn_")]);n();var g={_key:"_rankList_",_getLocalStorage:function(){var a=localStorage.getItem(this._key),b=null;return a?b=JSON.parse(a):{}},_setLocalStorage:function(a){localStorage.setItem(this._key,
JSON.stringify(a))},get:function(a){var b=this._getLocalStorage();return b&&b[a]?parseInt(b[a]):0},setRank:function(a){var b=this._getLocalStorage();b&&(b[a]=b[a]?parseInt(b[a])+1:1,this._setLocalStorage(b))}};l.on("click","li",function(){var a=$(this),b=a.data("id"),d=1===a.closest("#hideList").length;b&&(d?(h.append(a),g.setRank(b)):k.append(a),chrome.management.setEnabled(b,d,function(){}))});l.on("mouseenter","li",function(){var a=$(this);window["timer_"+a.data("id")]=setTimeout(function(){a.addClass("hover")},
100)}).on("mouseleave","li",function(){var a=$(this);a.removeClass("hover");clearTimeout(window["timer_"+a.data("id")])});$("body").on("dblclick",function(){var a=p();h.find("li").each(function(b,d){var e=$(d),c=e.data("id");a&&1==a[c]?e.attr("locked",""):(k.append(e),chrome.management.setEnabled(c,!1,function(){}))});setTimeout(function(){h.attr("locked","");setTimeout(function(){h.removeAttr("locked")},800)},0)});if(!localStorage.getItem("_switch_right_click_")){var m=localStorage.getItem("_rightClick_")||
"uninstall";$(document).on("mousedown","#hideList>li, #showList>li",function(a){2===a.button&&("uninstall"==m?chrome.management.uninstall($(this).data("id"),function(){n()}):"lock"!=m&&"option"==m&&(a=$(this).data("optionurl"))&&window.open(a))})}$(document).on("contextmenu",function(a){return!1})})();
